/*!
 * Start Bootstrap - Dress By Heart v0.0.1 (https://dressbyheart.se)
 * Copyright 2013-2017 Dress By Heart
 * Licensed under  ()
 */
$(document).ready(function(){function a(a){$.get("/api/event/places_left/"+a,function(a){n.places_left=a.places_left,$(".places-left").html(a.places_left)})}var e=location.hash.replace("#","").replace("/",""),n={};$.get("/api/event/"+e,function(e){n.event=e,a(n.event.id)}),$("#anmalanForm input,#anmalanForm textarea").jqBootstrapValidation({preventSubmit:!0,submitError:function(a,e,n){},submitSuccess:function(e,t){t.preventDefault(),$("#anmalanForm button[type=submit]").prop("disabled",!0);var s=$("#anmalanForm input#firstname").val(),r=$("#anmalanForm input#lastname").val(),l=$("#anmalanForm input#email").val(),m=$("#anmalanForm input#places").val();return parseInt(m)>n.places_left?($("#anmalanForm #success").html("<div class='alert alert-danger'>"),$("#anmalanForm #success > .alert-danger").append($("<strong>").text("Du kan inte registrera fler platser än det finns ledigt!")),$("#anmalanForm #success > .alert-danger").append("</div>"),void $("#anmalanForm button[type=submit]").prop("disabled",!1)):void $.ajax({url:"../api/event/register",type:"POST",data:{event_id:n.event.id,name:s+" "+r,email:l,nbr_places:m},cache:!1,success:function(e){e.status?($("#anmalanForm #success").html("<div class='alert alert-success'>"),$("#anmalanForm #success > .alert-success").append("<strong>Tack för ditt intresse! Infomation om anmälan kommer skickas till din e-postadress.</strong>"),$("#anmalanForm #success > .alert-success").append("</div>"),$("#anmalanForm").trigger("reset"),a(n.event.id)):($("#anmalanForm #success").html("<div class='alert alert-danger'>"),$("#anmalanForm #success > .alert-danger").append($("<strong>").text(e.message)),$("#anmalanForm #success > .alert-danger").append("</div>"))},error:function(a){console.log(a),$("#anmalanForm #success").html("<div class='alert alert-danger'>"),$("#anmalanForm #success > .alert-danger").append($("<strong>").text("Sorry "+s+", it seems that my mail server is not responding. Please try again later!")),$("#anmalanForm #success > .alert-danger").append("</div>")},complete:function(){$("#anmalanForm button[type=submit]").prop("disabled",!1)}})},filter:function(){return $(this).is(":visible")}})});