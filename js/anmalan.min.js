/*!
 * Start Bootstrap - Dress By Heart v0.0.1 (https://dressbyheart.se)
 * Copyright 2013-2018 Dress By Heart
 * Licensed under  ()
 */
$(document).ready(function(){function e(e){$.get("/api/event_places_left/"+e,function(e){n.places_left=e.places_left,$(".places-left").html(e.places_left)})}var a=location.hash.replace("#","").replace("/",""),n={};""===a&&(a="next"),$.get("/api/event/lecture/"+a,function(a){n.event=a,document.title="Inspirationsföreläsning Lund "+n.event.formattedDate+" | Dress by heart",$(".event-date").text(n.event.formattedDate),$(".event-price").text(n.event.price),$(".event-title").text(n.event.title),n.event.enableBooking?($(".booking-enabled").show(),$(".booking-disabled").hide()):($(".booking-enabled").hide(),$(".booking-disabled").show(),n.event.next&&$(".next-event").html('<a href="/anmalan#'+n.event.next.name+'">Nästa föreläsning hålls i Lund den '+n.event.next.formattedDate+"</a>")),$(".anmalan .intro-text").show(),e(n.event.id)}),$("#anmalanForm input,#anmalanForm textarea").jqBootstrapValidation({preventSubmit:!0,submitError:function(e,a,n){},submitSuccess:function(a,t){t.preventDefault(),$("#anmalanForm button[type=submit]").prop("disabled",!0);var s=$("#anmalanForm input#firstname").val(),r=$("#anmalanForm input#lastname").val(),l=$("#anmalanForm input#email").val(),i=$("#anmalanForm input#places").val();return n.places_left>0&&parseInt(i)>n.places_left?($("#anmalanForm #success").html("<div class='alert alert-danger'>"),$("#anmalanForm #success > .alert-danger").append($("<strong>").text("Du kan inte registrera fler platser än det finns ledigt!")),$("#anmalanForm #success > .alert-danger").append("</div>"),void $("#anmalanForm button[type=submit]").prop("disabled",!1)):void $.ajax({url:"../api/event/register",type:"POST",data:{event_id:n.event.id,name:s+" "+r,email:l,nbr_places:i},cache:!1,success:function(a){a.status?($("#anmalanForm #success").html("<div class='alert alert-success'>"),$("#anmalanForm #success > .alert-success").append("<strong>Tack för ditt intresse! Infomation om anmälan kommer skickas till din e-postadress.</strong>"),$("#anmalanForm #success > .alert-success").append("</div>"),$("#anmalanForm").trigger("reset"),e(n.event.id)):($("#anmalanForm #success").html("<div class='alert alert-danger'>"),$("#anmalanForm #success > .alert-danger").append($("<strong>").text(a.message)),$("#anmalanForm #success > .alert-danger").append("</div>"))},error:function(e){console.log(e),$("#anmalanForm #success").html("<div class='alert alert-danger'>"),$("#anmalanForm #success > .alert-danger").append($("<strong>").text("Sorry "+s+", it seems that my mail server is not responding. Please try again later!")),$("#anmalanForm #success > .alert-danger").append("</div>")},complete:function(){$("#anmalanForm button[type=submit]").prop("disabled",!1)}})},filter:function(){return $(this).is(":visible")}})});